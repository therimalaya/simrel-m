# Web Interface #

```{r setup_web_interface, include=FALSE}
knitr::opts_chunk$set(
  comment = NA,
  message = FALSE,
  warning = FALSE,
  echo    = FALSE,
  fig.pos = 'H'
)
```

In order to give an alternative interface for `simrel`, we have created a shiny app which  allows users to input the simulation parameters through different input fields. Figure \@ref(fig:AppSimulatr) shows a screenshot of the application. The application contains three main sections through which the user can interact with  this simulation approach. A random seed can be selected using section Figure \@ref(fig:AppSimulatr) (a) so that a particular set of data can be  re-simulated if needed. Figure \@ref(fig:AppSimulatr) (b) has all the input panels where the user dependent  parameters for simulation can be entered. Here the user also has the option to simulate univariate, bivariate and multivariate simulation. In addition, a simulated R-object comprised by the simulated data can be download as `Rdata` format (section (e) in Figure \@ref(fig:AppSimulatr)).  The object holds the simulated data along with other properties such as coefficient of determination for each response, true regression coefficients and rotation matrices. Users can also download simulated data in JSON and CSV format.

All `simrel` parameters can be entered using a simple user interface where a vectors are separated with comma(,) and lists are separated with  semicolon(;). For instance, the relevant position discussed in the [implementation](#implementation) section of this paper can be entered as `1, 6; 2, 5; 3, 4` which is equivalent to R syntax `list(c(1, 6), c(2, 5), c(3, 4))`. An R expression equivalent to the input parameters as shown in Figure - 5(b) can be written as,

```{r, echo = TRUE, eval = FALSE}
simrel(
  n      = 200, # Number of training observations
  ntest  = 50, # Number of test observations
  p      = 15, # Number of predictor variables
  q      = c(5, 4), # Number of relevant predictors
  relpos = list(c(1, 2), c(3, 4, 6)),
         # Relevant predictor components
  R2     = c(0.8, 0.7), # Rsq for each response components
  m      = 4, # Number of response variables
  gamma  = 0.6, # Decay factor of eigenvalues of predictors
  eta    = 0, # Decay factor of eigenvalues of responses
  ypos   = list(c(1, 3), c(2, 4)),
         # Combination of response components on rotation
  type   = "multivariate"
)
```

(ref:AppSimulatr) Web interface of shiny application of `simrel`: (**a**) Buttons to trigger simulation, (**b**) Parameters for simulation, (**c**) Visualization of the true properties of simulated data (regression coefficients, true and estimated covariance between response and predictors components) (**d**) Additional analysis (**e**) Download option of simulated data.

```{r AppSimulatr, fig.cap='(ref:AppSimulatr)', fig.align='center', out.width='100%', fig.pos='!htb'}
knitr::include_graphics('images/AppSimulatr.png', dpi = 500)
```

With the parameters for simulation in the screenshot (Figure-\@ref(fig:AppSimulatr)) 200 training sets (`n`) and 50 test sets (`ntest`) will be simulated with 15 predictor variables (`p`) and 4 response variables (`m`). The 4 response variables will have 2 true latent dimension which is referred as _response components_. The first response component is rotated together with third (uninformative) response component and second response component is rotated together with fourth (uninformative) response components (`ypos`). Out of 15 predictors, 5 will be relevant for first response component and 4 will be relevant for second response component (`q`). The relevant principal components of the predictor variables are _predictor components_. The 5 predictor variables which are relevant for first response components span the same space as the predictor components at position 1 and 2. Similarly, the 4 predictor variables which are relevant for second response components span the same space as the predictor components at position 3, 4 and 6 (`relpos`). The coefficient of determination for first response component is 0.8 and second response component is 0.7 (`R2`). The eigenvalues of predictor components decay exponentially by the factor of 0.6 (`gamma`) but the eigenvalues of response components are constant (but can be set to exponential decay) (`eta`).

The application not only allows users to simulate data, but also gives some insight into simulated data properties. Section (c) in Figure \@ref(fig:AppSimulatr) contains three plots -- a) true regression coefficients b) relevant components and c) estimated relevant components. In the first plot (Figure-\@ref(fig:AppSimulatr)(c) top) we can see that predictor variables (1, 2, 8, 9 and 13) are relevant for the first and third response variable (red and blue line) by their non-zero coefficients, whereas predictor variables (3, 4, 6 and 15) are relevant for the second and fourth response variables (purple and green line). The second plot (Figure \@ref(fig:AppSimulatr)(c) middle) shows the covariances between the response components and the predictor components along with the corresponding eigenvalues in the background (bar plot). In the plot the absolute value of the covariances after scaling with the largest covariance are shown. As in our parameter setting, the plot shows that first (red line) and second (green line) predictor components have non-zero covariance with first response component and third, fourth and sixth predictor components have non-zero covariance with second response component. The third plot (Figure-\@ref(fig:AppSimulatr)(c) bottom) is the estimated covariance between predictor components and the response variables, for the simulated data. Since the first and third response components are rotated together, in the plot, the covariance between predictor components and first and third response variables (red and blue line) are following similar pattern. This also suggests that the predictor components which were relevant for first response component gets relevant for first and third response variables after rotation.

Along with these main sections, section (d) in the same figure contains additional analysis performed with the simulated data such as its estimation with different methods. This section is intended for educational purposes to show how changing the data properties influences the performances of different estimation and prediction methods. Beside this application, for Rstudio users, a gadget will be available after installing the r-package. This gadget provides an interface enabling users to input simulation parameters and access some of the properties.

Many scientific studies [@helland2012near; @saebo2008lpls; @cook2015simultaneous] are using simulated data in order to compare their findings with others or assess its properties. In many of these situations, a user-friendly and versatile simulation tool like `simrel` can play an important role. @gangsei2016theoretical and @saebo2015simrel are some examples where the univariate and bivariate form of `simrel` have been used for such purposes.

# Conclusion

Whether comparing methods or assessing and understanding properties of any methods, tools or procedure; simulated data allows controlled tests for researchers. However, researchers spend enormous amount of time for creating such simulation tools so that they can obtain particular nature of data. We believe that this tool along with R-package and the easy to use shiny web interface will become an assistive tool for researchers in this respect.
